angular.module("starter",["ionic","starter.controllers","starter.services","starter.filters","starter.auth"]).run(function(t){t.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleLightContent()})}).config(function(t,e){t.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html"}).state("tab.games",{url:"/games",views:{"tab-games":{templateUrl:"templates/tab-games.html",controller:"GamesCtrl"}}}).state("tab.game-detail",{url:"/games/:game",views:{"tab-games":{templateUrl:"templates/game-detail.html",controller:"GameDetailCtrl"}}}).state("tab.game-view",{url:"/games/:game/:stream",views:{"tab-games":{templateUrl:"templates/game-view.html",controller:"GameViewCtrl"}}}).state("tab.chat",{url:"/chat",views:{"tab-chat":{templateUrl:"templates/tab-chat.html",controller:"ChatCtrl"}}}).state("tab.chat-detail",{url:"/chat/:chatId",views:{"tab-chat":{templateUrl:"templates/chat-detail.html",controller:"ChatDetailCtrl"}}}).state("tab.chat-post",{url:"/chat/post",params:{auth:null},views:{"tab-chat":{templateUrl:"templates/chat-post.html",controller:"ChatPostCtrl"}}}).state("tab.login",{url:"/login",views:{"tab-login":{templateUrl:"templates/tab-login.html",controller:"AuthCtrl"}}}),e.otherwise("/tab/games")}),angular.module("starter.controllers",[]).controller("AuthCtrl",function(t,e){e.$onAuth(function(e){t.authData=e,t.title=e?e.github.displayName:"Login"}),t.login=function(t){e.$authWithOAuthPopup(t)["catch"](function(t){console.error(t)})},t.logout=function(){e.$unauth()}}).controller("GamesCtrl",function(t,e){e.getTopGames().then(function(e){t.topGames=e}),t.strip=function(t){return console.log(t),t.replace(/.*?:\/\//g,"")}}).controller("GameDetailCtrl",function(t,e,a){t.game=e.game,a.getGameStreams(t.game).then(function(e){t.streams=e})}).controller("GameViewCtrl",function(t,e,a){t.game=e.game,t.stream=e.stream,t.url=a.getStreamUrl(t.stream)}).controller("ChatCtrl",function(t,e,a,r,o){t.chats=r.reverse(),o.$onAuth(function(e){t.auth=e}),t.remove=function(t){var e=new Firebase("https://test-app-ionic.firebaseio.com/chats/"+t.$id);e.remove()},t.add=function(){if(t.auth)a.go("tab.chat-post",{auth:t.auth});else{e.alert({title:"You need to login first"})}}}).controller("ChatPostCtrl",function(t,e,a){var r=a.auth.github;t.avatar=r.cachedUserProfile.avatar_url,t.post=function(a){if(t.auth&&a.msg){var o={name:r.displayName||r.username,face:t.avatar,text:a.msg.$viewValue,time:(new Date).getTime()},l=new Firebase("https://test-app-ionic.firebaseio.com/chats/");l.push(o)}e.go("tab.chat")}}).controller("ChatDetailCtrl",function(t,e,a){for(var r=e.chatId,o=null,l=0;l<a.length;l++)if(a[l].$id===r){o=a[l];break}t.chat=o}),angular.module("starter.services",["firebase"]).factory("Chats",function(t){var e=new Firebase("https://test-app-ionic.firebaseio.com/chats");return t(e)}).factory("TwitchTV",function(t,e,a){function r(){var a=e.defer();return t.jsonp("https://api.twitch.tv/kraken/games/top?callback=JSON_CALLBACK").then(function(t){a.resolve(t.data.top)}),a.promise}function o(a){var r=e.defer();return t.jsonp("https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(a)+"&callback=JSON_CALLBACK").then(function(t){r.resolve(t.data.streams)}),r.promise}function l(t){var e="http://www.twitch.tv/"+t+"/embed";return a.trustAsResourceUrl(e)}function n(t){var e="http://www.twitch.tv/"+t+"/hls";return a.trustAsResourceUrl(e)}var s={getTopGames:r,getGameStreams:o,getStreamUrl:l,getStreamUrlHLS:n};return s}),angular.module("starter.filters",[]).filter("proto",function(){return function(t,e){var a=e?e+":":"";return t.replace(/.*?:/,a)}}),angular.module("starter.auth",["firebase"]).factory("Auth",function(t){var e=new Firebase("https://test-app-ionic.firebaseio.com");return t(e)});